{"version":3,"file":"static/webpack/static\\development\\pages\\sell.js.6cfaf783f74a494ccf97.hot-update.js","sources":["webpack:///./components/CreateItem.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport { Mutation } from 'react-apollo';\r\nimport gql from 'graphql-tag';\r\nimport Router from 'next/router';\r\nimport Form from './styles/Form';\r\n\r\nimport formatMoney from '../lib/formatMoney';\r\nimport ErrorMessage from './ErrorMessage';\r\n\r\nconst CREATE_ITEM_MUTATION = gql`\r\n    mutation CREATE_ITEM_MUTATION(\r\n        $title: String!\r\n        $description: String!\r\n        $price: Int!\r\n        $image: String\r\n        $largeImage: String\r\n    ) {\r\n        createItem(\r\n            title: $title\r\n            description: $description\r\n            price: $price\r\n            image: $image\r\n            largeImage: $largeImage\r\n        ) {\r\n            id\r\n        }\r\n    }\r\n`;\r\n\r\nclass CreateItem extends Component {\r\n    state = {\r\n        title: 'A Kewl Title',\r\n        description: 'SQUAWK',\r\n        image: '',\r\n        largeImage: '',\r\n        price: 1000\r\n    }\r\n\r\n    handleChange = e => {\r\n        const { name, type, value } = e.target;\r\n        const val = type === 'number' ? parseFloat(value) : value;\r\n        this.setState({ [name]: val });\r\n    }\r\n\r\n    uploadFile = async e => {\r\n        console.log(\"Uploading file...\");\r\n\r\n        const files = e.target.files;\r\n        const data = new FormData();\r\n\r\n        data.append('file', files[0]);\r\n        data.append('upload_preset', 'sickfits');\r\n\r\n        const res = await fetch\r\n        ('https://api.cloudinary.com/v1_1/sick-fits-sh/image/upload', {\r\n            method: 'POST',\r\n            body: data\r\n        });\r\n\r\n        const file = await res.json();\r\n        if (file) {\r\n            this.setState({\r\n                image: file.secure_url,\r\n                largeImage: file.eager[0].secure_url\r\n            });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Mutation mutation={CREATE_ITEM_MUTATION} variables={this.state}>\r\n                {(createItem, { loading, error }) => (\r\n                    <Form \r\n                        onSubmit={async e => {\r\n\r\n                            // stop form from submitting\r\n                            e.preventDefault();\r\n\r\n                            // call mutation\r\n                            const res = await createItem();\r\n\r\n                            // route change to single item page\r\n                            Router.push({\r\n                                pathname: '/item',\r\n                                query: { id: res.data.createItem.id }\r\n                            })\r\n                        }}\r\n                    >\r\n                        <ErrorMessage error={error} /> \r\n                        <fieldset disabled={loading} aria-busy={loading}>\r\n\r\n                            <label htmlFor=\"file\">\r\n                                Image\r\n                                <input \r\n                                    type=\"file\" \r\n                                    id=\"file\" \r\n                                    name=\"file\" \r\n                                    placeholder=\"Upload an image\" \r\n                                    required \r\n                                    onChange={this.uploadFile}\r\n                                />\r\n                                {this.state.image ? <img width={200} src={this.state.image} alt=\"Upload Preview\" /> : null}\r\n                            </label>\r\n\r\n                            <label htmlFor=\"title\">\r\n                                Title\r\n                                <input \r\n                                    type=\"text\" \r\n                                    id=\"title\" \r\n                                    name=\"title\" \r\n                                    placeholder=\"Title\" \r\n                                    required \r\n                                    value = {this.state.title} \r\n                                    onChange={this.handleChange}\r\n                                />\r\n                            </label>\r\n\r\n                            <label htmlFor=\"price\">\r\n                                Price\r\n                                <input \r\n                                    type=\"number\" \r\n                                    id=\"price\" \r\n                                    name=\"price\" \r\n                                    placeholder=\"Price\" \r\n                                    required \r\n                                    value = {this.state.price} \r\n                                    onChange={this.handleChange}\r\n                                />\r\n                            </label>\r\n\r\n                            <label htmlFor=\"description\">\r\n                                Price\r\n                                <textarea \r\n                                    id=\"description\" \r\n                                    name=\"description\" \r\n                                    placeholder=\"Enter A Description\" \r\n                                    required \r\n                                    value = {this.state.description} \r\n                                    onChange={this.handleChange}\r\n                                />\r\n                            </label>\r\n                            <button type=\"submit\">Submit</button>\r\n                        </fieldset>\r\n                    </Form>\r\n                )}\r\n            </Mutation>\r\n        )\r\n    }\r\n}\r\n\r\nexport default CreateItem;\r\nexport { CREATE_ITEM_MUTATION };\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAmBA;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AACA;AAOA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AACA;AACA;;;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAEA;AACA;AAPA;AAAA;AAWA;AACA;AAFA;AACA;AAXA;AASA;AATA;AAAA;AACA;AADA;AAeA;AACA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAtBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;AAuBA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAJA;AAAA;AACA;AADA;AAMA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAFA;AACA;AAVA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAtEA;AA4EA;;;;AAtHA;AACA;AAwHA;;;;;A","sourceRoot":""}